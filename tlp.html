<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>塔罗牌占卜 - 谢霸制作（无商业用途）</title>
    <style>
        /* 全局样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", "SimHei", sans-serif;
        }

        body {
            background-color: #f5f5f7;
            padding: 10px;
            min-height: 100vh;
        }

        /* 标题样式 */
        .title {
            text-align: center;
            color: #5a3b5d;
            font-size: 20px;
            font-weight: bold;
            margin: 10px 0 20px;
        }

        /* 主容器 - 响应式分栏 */
        .main-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* 牌面区域 */
        .cards-section {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .cards-title {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }

        /* 牌面网格 - 响应式布局 */
        .cards-grid {
            display: grid;
            /* 手机端4列，平板6列，电脑13列 */
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 8px;
        }

        /* 牌面按钮样式 */
        .card-item {
            width: 100%;
            aspect-ratio: 2/3; /* 保持牌面比例 */
            background-color: #0d1b2a;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            border: 1px solid #ddd;
            overflow: hidden;
        }

        .card-item:disabled {
            cursor: not-allowed;
            opacity: 0.9;
        }

        /* 未抽牌的样式 */
        .card-closed .star {
            color: #ffd700;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .card-closed .num {
            color: #e0e0e0;
            font-size: 12px;
        }

        /* 已抽牌的样式 */
        .card-opened {
            background-color: #f0f0f0;
        }

        .card-opened .card-name {
            font-size: 11px;
            color: #333;
            text-align: center;
            padding: 0 5px;
            margin-bottom: 5px;
            word-break: break-all;
        }

        .card-opened .card-pos {
            font-size: 10px;
            font-weight: 600;
        }

        .pos-up {
            color: #388e3c;
        }

        .pos-down {
            color: #d32f2f;
        }

        /* 结果区域 */
        .result-section {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .result-title {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }

        /* 问题输入框 */
        .question-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 15px;
            outline: none;
        }

        .question-input:focus {
            border-color: #5a3b5d;
        }

        /* 已选牌列表 */
        .selected-list {
            width: 100%;
            height: 120px;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 10px;
            overflow-y: auto;
            margin-bottom: 10px;
        }

        .list-item {
            padding: 5px 0;
            font-size: 14px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }

        .list-item:hover {
            background-color: #f5f5f7;
        }

        .list-item.active {
            background-color: #e8f0fe;
            padding-left: 5px;
            border-left: 3px solid #5a3b5d;
        }

        /* 按钮样式 */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .reset-btn {
            background-color: #d32f2f;
            color: white;
        }

        .reset-btn:hover {
            background-color: #b71c1c;
        }

        /* 解释区域 */
        .explanation-box {
            width: 100%;
            height: 180px;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 10px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.6;
        }

        /* 媒体查询 - 适配不同设备 */
        @media (min-width: 768px) {
            .main-container {
                flex-direction: row;
            }
            .cards-section {
                flex: 1;
            }
            .result-section {
                flex: 1;
                max-width: 500px;
            }
            .title {
                font-size: 24px;
            }
            .cards-grid {
                grid-template-columns: repeat(13, 1fr); /* 电脑端13列 */
            }
        }

        @media (min-width: 1200px) {
            body {
                padding: 20px;
                max-width: 1400px;
                margin: 0 auto;
            }
            .cards-grid {
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <h1 class="title">塔罗牌占卜</h1>
    
    <div class="main-container">
        <!-- 左侧牌面区域 -->
        <div class="cards-section">
            <div class="cards-title">塔罗牌（点击抽取）</div>
            <div class="cards-grid" id="cardsGrid"></div>
        </div>

        <!-- 右侧结果区域 -->
        <div class="result-section">
            <div class="result-title">占卜结果</div>
            
            <!-- 问题输入 -->
            <input type="text" class="question-input" placeholder="你的问题或想法...">
            
            <!-- 已选牌列表 -->
            <div class="selected-list" id="selectedList"></div>
            
            <!-- 操作按钮 -->
            <button class="btn reset-btn" onclick="resetReading()">重新开始</button>
            
            <!-- 解释区域 -->
            <div class="result-title">牌意解释</div>
            <div class="explanation-box" id="explanationBox"></div>
        </div>
    </div>

    <script>
        // 塔罗牌数据
        const tarotData = [
            // 大阿卡那牌
            ("愚人",
             "正位：冒险、新的开始、自由、纯真、热情",
             "逆位：鲁莽、天真、不负责任、逃避现实、冲动行事"),
             
            ("魔术师",
             "正位：创造力、行动力、资源掌握、将想法变为现实",
             "逆位：缺乏自信、能力不足、滥用权力、错失机会"),
             
            ("女祭司",
             "正位：直觉、神秘、内在智慧、隐藏的知识、潜意识",
             "逆位：直觉失灵、秘密泄露、缺乏洞察力、过度多疑"),
             
            ("女皇",
             "正位：丰饶、母性、创造力、生命滋养、繁荣",
             "逆位：贫瘠、依赖、缺乏创造力、过度放纵"),
             
            ("皇帝",
             "正位：权威、结构、控制、理性、领导力、责任",
             "逆位：独裁、缺乏纪律、滥用权力、优柔寡断"),
             
            ("教皇",
             "正位：传统、精神指导、道德价值观、宗教信仰、寻求指导",
             "逆位：教条、盲目信仰、缺乏独立思考、脱离现实"),
             
            ("恋人",
             "正位：爱、选择、关系、重要决定、价值观、和谐",
             "逆位：错误选择、关系破裂、不和谐、缺乏价值观"),
             
            ("战车",
             "正位：意志、胜利、控制、克服障碍、决心、专注",
             "逆位：缺乏自律、失败、失控、冲突、犹豫不决"),
             
            ("力量",
             "正位：内在力量、勇气、坚韧、自我控制、慈悲",
             "逆位：软弱、恐惧、缺乏勇气、失去控制、滥用力量"),
             
            ("隐士",
             "正位：孤独、反思、智慧、内省、寻求真相、内心答案",
             "逆位：孤立、逃避、缺乏远见、过度谨慎、固执己见"),
             
            ("命运之轮",
             "正位：变化、命运、机遇、生活循环、顺应潮流",
             "逆位：抗拒变化、厄运、停滞不前、错失机会"),
             
            ("正义",
             "正位：公平、平衡、因果报应、道德、法律、责任",
             "逆位：不公、失衡、偏见、逃避责任、法律问题"),
             
            ("倒吊人",
             "正位：牺牲、视角转变、耐心、不同角度看事物",
             "逆位：不必要的牺牲、消极、停滞、不愿改变视角"),
             
            ("死神",
             "正位：结束、转变、重生、重大变化、旧事物终结",
             "逆位：抗拒改变、恐惧结束、停滞不前、旧模式持续"),
             
            ("节制",
             "正位：平衡、和谐、适度、情绪与理性调和、中庸",
             "逆位：失衡、过度、冲突、极端、缺乏耐心"),
             
            ("恶魔",
             "正位：诱惑、束缚、物质主义、欲望、恐惧、枷锁",
             "逆位：摆脱束缚、克服诱惑、自由、觉醒、释放"),
             
            ("塔",
             "正位：突然变化、崩溃、觉醒、旧结构崩塌、新开始",
             "逆位：抗拒变革、避免灾难、延迟崩溃、恐惧变化"),
             
            ("星星",
             "正位：希望、灵感、精神指引、乐观、梦想、信心",
             "逆位：绝望、缺乏灵感、悲观、失去希望、迷茫"),
             
            ("月亮",
             "正位：不确定性、恐惧、潜意识、内心疑虑、幻觉",
             "逆位：克服恐惧、清晰、理解潜意识、摆脱幻觉"),
             
            ("太阳",
             "正位：喜悦、成功、生命力、光明、温暖、积极能量",
             "逆位：虚假乐观、暂时挫折、缺乏阳光、成功短暂"),
             
            ("审判",
             "正位：重生、觉醒、责任、自我反思、改变机会",
             "逆位：不愿改变、拒绝觉醒、自责、审判不公"),
             
            ("世界",
             "正位：完成、圆满、统一、循环结束、成功实现",
             "逆位：未完成、不圆满、停滞、缺乏终结、新循环开始"),
            
            // 小阿卡那牌
            ...(() => {
                const suits = ["权杖", "圣杯", "宝剑", "星币"];
                const numbers = ["Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10"];
                const courts = ["侍从", "骑士", "王后", "国王"];
                const minor = [];
                
                suits.forEach(suit => {
                    // 数字牌
                    numbers.forEach(number => {
                        if (number === "Ace") {
                            minor.push([
                                `${suit}Ace`,
                                `正位：新的开始，充满活力的能量，${suit}象征的新机会`,
                                `逆位：机会错失，能量受阻，${suit}象征的挑战`
                            ]);
                        } else {
                            minor.push([
                                `${suit}${number}`,
                                `正位：稳步发展，持续成长，${suit}象征的能量在增强`,
                                `逆位：进展缓慢，遇到阻碍，${suit}象征的能量在减弱`
                            ]);
                        }
                    });
                    
                    // 宫廷牌
                    courts.forEach(court => {
                        minor.push([
                            `${suit}${court}`,
                            `正位：成熟的领导力，${court}所代表的品质，${suit}象征的力量`,
                            `逆位：不成熟的行为，${court}品质的负面表现，${suit}能量的滥用`
                        ]);
                    });
                });
                return minor;
            })()
        ];

        // 全局变量
        let usedCards = new Set();      // 已抽出的牌索引
        let selectedCards = [];         // 选中的牌列表
        let cardElements = [];          // 牌面元素列表

        // 初始化页面
        window.onload = function() {
            createCardButtons();
        };

        // 创建牌面按钮
        function createCardButtons() {
            const cardsGrid = document.getElementById('cardsGrid');
            cardsGrid.innerHTML = '';
            cardElements = [];

            // 创建78张牌（6行13列）
            for (let i = 0; i < 78; i++) {
                const cardNumber = i + 1;
                
                // 创建牌面容器
                const cardItem = document.createElement('button');
                cardItem.className = 'card-item card-closed';
                cardItem.dataset.index = i;
                cardItem.onclick = () => drawCard(i);
                
                // 星星图标
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = '★';
                
                // 数字标签
                const num = document.createElement('div');
                num.className = 'num';
                num.textContent = cardNumber;
                
                // 组装牌面
                cardItem.appendChild(star);
                cardItem.appendChild(num);
                cardsGrid.appendChild(cardItem);
                
                // 存储元素引用
                cardElements.push({
                    container: cardItem,
                    star: star,
                    num: num,
                    name: null,
                    pos: null,
                    cardData: null
                });
            }
        }

        // 抽取卡牌
        function drawCard(index) {
            const cardObj = cardElements[index];
            
            // 检查是否已抽取
            if (cardObj.cardData) return;
            
            // 检查是否抽完所有牌
            if (usedCards.size >= tarotData.length) {
                alert('所有牌都已抽出，请重新开始');
                return;
            }
            
            // 随机选择未抽过的牌
            let cardIdx;
            do {
                cardIdx = Math.floor(Math.random() * tarotData.length);
            } while (usedCards.has(cardIdx));
            usedCards.add(cardIdx);
            
            const card = tarotData[cardIdx];
            const cardName = card[0];
            const isUpright = Math.random() > 0.5;
            const position = isUpright ? '正位' : '逆位';
            
            // 切换牌面样式（已抽取）
            const cardItem = cardObj.container;
            cardItem.classList.remove('card-closed');
            cardItem.classList.add('card-opened');
            cardItem.disabled = true;
            
            // 清空原有内容
            cardItem.innerHTML = '';
            
            // 添加牌名
            const nameLabel = document.createElement('div');
            nameLabel.className = 'card-name';
            nameLabel.textContent = cardName;
            cardItem.appendChild(nameLabel);
            
            // 添加正逆位
            const posLabel = document.createElement('div');
            posLabel.className = `card-pos ${isUpright ? 'pos-up' : 'pos-down'}`;
            posLabel.textContent = position;
            cardItem.appendChild(posLabel);
            
            // 更新存储的数据
            cardObj.name = nameLabel;
            cardObj.pos = posLabel;
            cardObj.cardData = card;
            
            // 添加到选中列表
            selectedCards.push({
                name: cardName,
                isUpright: isUpright,
                data: card
            });
            
            // 更新选中列表显示
            updateSelectedList();
        }

        // 更新选中牌列表
        function updateSelectedList() {
            const selectedList = document.getElementById('selectedList');
            selectedList.innerHTML = '';
            
            selectedCards.forEach((card, idx) => {
                const listItem = document.createElement('div');
                listItem.className = `list-item ${idx === selectedCards.length - 1 ? 'active' : ''}`;
                listItem.dataset.index = idx;
                listItem.textContent = `${idx + 1}. ${card.name} (${card.isUpright ? '正位' : '逆位'})`;
                listItem.onclick = () => showExplanation(idx);
                
                selectedList.appendChild(listItem);
            });
            
            // 自动显示最后一张牌的解释
            if (selectedCards.length > 0) {
                showExplanation(selectedCards.length - 1);
            }
        }

        // 显示牌意解释
        function showExplanation(index) {
            const explanationBox = document.getElementById('explanationBox');
            const card = selectedCards[index];
            
            // 移除所有active样式
            document.querySelectorAll('.list-item').forEach(item => {
                item.classList.remove('active');
            });
            // 添加当前active样式
            document.querySelector(`.list-item[data-index="${index}"]`).classList.add('active');
            
            // 显示解释内容
            const position = card.isUpright ? '正位' : '逆位';
            const explanation = card.isUpright ? card.data[1] : card.data[2];
            
            explanationBox.innerHTML = `<strong>${card.name} (${position})</strong><br><br>${explanation}`;
        }

        // 重新开始占卜
        function resetReading() {
            usedCards.clear();
            selectedCards = [];
            
            // 清空列表和解释
            document.getElementById('selectedList').innerHTML = '';
            document.getElementById('explanationBox').innerHTML = '';
            
            // 重新创建牌面
            createCardButtons();
        }
    </script>
</body>

</html>
